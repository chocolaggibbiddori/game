# 체스 요구사항

## 게임 순서

1. `Main` 메서드가 실행되면 다음 문자열이 순서대로 출력된다.
   1. `게임을 시작합니다.`
   2. `기물을 움직이려면 기물의 타일과 움직일 타일을 입력해 주세요. ex) e2 e4`
   3. `기보를 보고싶으면 '기보'를 입력해주세요.`
   4. `기권을 하고싶으면 '기권'을 입력해주세요.`
   5. 빈 보드판
2. 백의 좌표를 입력 받는다.
   1. 문자열 `백 기물을 움직여주세요.` 출력
   2. 사용자의 입력에 따라 출력
      - 사용자가 백 기물의 좌표와 움직일 좌표를 입력했을 경우
         1. 보드판 출력
      - `기보`를 입력했을 경우
         1. 기보 출력
         2. 2번 순서로 돌아감
      - `기권`을 입력했을 경우
         1. 5번 순서의 흑 승리로 이동
      - 사용자의 입력을 처리할 수 없는 경우 안내 문구 출력 후 2번 순서로 돌아감
         - 입력 형식에서 벗어남 -> `입력은 "(기물의 타일) (이동할 타일)" 형식에 맞춰 해주세요.`
         - 타일 좌표가 올바르지 않음 -> `타일은 a1 ~ h8 내에서 입력해주세요.`
         - 해당 기물이 이동할 수 있는 타일이 아님 -> `해당 칸으로는 이동할 수 없습니다.`
         - 규칙에 의해 이동할 수 없음 -> `해당 칸으로는 이동할 수 없습니다.`
   3. 보드판 출력
3. 흑의 좌표를 입력 받는다.
   1. 문자열 `흑 기물을 움직여주세요.` 출력
   2. 사용자의 입력에 따라 출력
      - 사용자가 흑 기물의 좌표와 움직일 좌표를 입력했을 경우
         1. 보드판 출력
      - `기보`를 입력했을 경우
         1. 기보 출력
         2. 3번 순서로 돌아감
      - `기권`을 입력했을 경우
         1. 5번 순서의 백 승리로 이동
      - 사용자의 입력을 처리할 수 없는 경우 안내 문구 출력 후 3번 순서로 돌아감
         - 입력 형식에서 벗어남 -> `입력은 "(기물의 타일) (이동할 타일)" 형식에 맞춰 해주세요.`
         - 타일 좌표가 올바르지 않음 -> `타일은 a1 ~ h8 내에서 입력해주세요.`
         - 해당 기물이 이동할 수 있는 타일이 아님 -> `해당 칸으로는 이동할 수 없습니다.`
         - 규칙에 의해 이동할 수 없음 -> `해당 칸으로는 이동할 수 없습니다.`
   3. 보드판 출력
4. 백 또는 흑이 승리 조건을 달성할 때까지 위의 2~3번을 반복한다.
5. 백 또는 흑이 승리 조건을 달성한 경우 다음 문자열이 순서대로 출력된다.
   - 백이 승리했을 경우
      1. `백 승리!!!`
      2. `게임을 종료합니다.`
      3. 기보
   - 흑이 승리했을 경우
      1. `흑 승리!!!`
      2. `게임을 종료합니다.`
      3. 기보
6. 무승부 조건이 달성됐을 경우 다음 문자열이 순서대로 출력된다.
   1. `무승부로 게임을 종료합니다.`
   2. 기보
7. `Main` 메서드가 종료된다.

## 보드판

- 보드판은 가로 세로 8x8로 이루어져 있다. 즉, 총 64개의 타일로 구성된다.
- 가로 줄은 "랭크(Rank)", 세로 줄은 "파일(File)"이라 표현한다. 
- 보드판은 문자로 표현한다.
   - 문자는 랭크마다 한 문자열씩 표현되며 각 랭크는 `/n` 문자로 구분한다.
   - 각 문자열은 백을 기준으로 맨 위 랭크 즉, 8랭크부터 1랭크 순으로 표현한다.
   - 한 문자열 내 각 문자는 백을 기준으로 맨 왼쪽 파일 즉, a파일부터 h파일 순으로 표현한다.
   - 기물이 있는 타일은 영문자, 빈 타일은 숫자로 표현한다.
   - 빈 타일은 숫자 1로 표현하나, 연속된 1은 그 수를 합쳐서 나타낸다.
   - 영문자는 기물에 따라 다음과 같이 표현한다. 백은 대문자, 흑은 소문자로 표현한다.
      - King -> K
      - Queen -> Q
      - Rook -> R
      - Knight -> N
      - Bishop -> B
      - Pawn -> P
   - ex) 초기 세팅 -> `rnbqkbnr\npppppppp\n8\n8\n8\n8\nPPPPPPPP\nRNBQKBNR`

## 기보

- 기보는 수를 둔 순서대로 작성한다.
- 백과 흑이 한 번씩 두면 1수를 두었다고 표시하고, 백과 흑의 수는 `\t` 문자로 구분한다. `ex) 1. d4\tNf6`
- 아직 흑이 수를 두지 않았다면 백의 수까지만 표시한다.
- 각 수는 `\n` 문자로 구분한다.
- 기보는 다음 규칙으로 작성되며 기물 이니셜만 대문자로 작성하고 나머지는 모두 소문자로 작성한다.
   - _ _ _ _ _ (기물 이니셜 + 기물 보조 문자 + 잡기 여부 + 기물이 이동한 위치 + 체크, 체크메이트 여부)
   - 기물 이니셜은 다음과 같다.
      - King -> K
      - Queen -> Q
      - Rook -> R
      - Knight -> N
      - Bishop -> B
      - Pawn -> 공백(생략)
   - 만약에 두 개의 룩이 모두 d1 타일에 올 수 있다고 한다면, 움직일 룩의 위치를 보조 문자에 넣어준다. 파일로 구분 가능하면 파일을 그렇지 않으면 랭크를 넣는다.
      - ex) R1이 a1에, R2가 h1에 있을 경우, R1 룩을 d1 타일로 움직이면 Rad1으로 표기한다.
      - ex) R1이 a1에, R2가 a8에 있을 경우, R1 룩을 a4 타일로 움직이면 R1a4로 표기한다.
   - 폰으로 기물을 잡을 경우 기물 보조 문자 칸에 폰의 파일을 넣어준다.
   - 상대 기물을 잡으면서 이동했을 경우 잡기 여부 위치에 `x` 문자를 넣어준다.
   - 체크일 경우 `+`, 체크메이트일 경우 `#`을 마지막에 붙여준다.
- 캐슬링은 다음과 같이 표기한다. (영어 대문자 `O`)
   - 킹 사이드 캐슬링: `O-O`
   - 퀸 사이드 캐슬링: `O-O-O`
- 프로모션을 했을 경우 기물이 이동한 위치 뒤에 `=` 문자와 승진한 기물의 이니셜을 적는다. `ex) a8=Q`
- 기권 없이 승부가 났을 경우 기보 맨 마지막에 다음 문자를 추가한다.
   - 백이 이겼을 경우: `1-0`
   - 흑이 이겼을 경우: `0-1`
   - 무승부일 경우: `1/2-1/2`

## 행마법

### King

- 전방위 1칸
- 타일에 아군 기물이 있으면 해당 타일로 이동할 수 없음
- 타일에 적군 기물이 있으면 기물을 잡으면서 해당 타일로 이동할 수 있음
- 체크가 되는 타일로는 이동할 수 없음
- 캐슬링: 킹은 룩 방향으로 2칸 이동하고 룩은 킹의 반대측 바로 옆으로 이동하는 특수 행마법 
   - 킹과 룩 모두 한 번도 움직이지 않았을 경우 해당 룩 방향으로 캐슬링 가능
   - 킹이 이동하는 타일 (킹 위치, 킹 목적지, 그 사이) 모두 체크 당하는 타일이 아니어야 함

### Queen

- 전방위 ?칸
- 타일에 아군 기물이 있으면 해당 타일과 그 뒤로 이동할 수 없음
- 타일에 적군 기물이 있으면 기물을 잡으면서 해당 타일로 이동할 수 있으나 그 뒤로는 이동할 수 없음

### Rook

- 동서남북 방향으로 ?칸
- 타일에 아군 기물이 있으면 해당 타일과 그 뒤로 이동할 수 없음
- 타일에 적군 기물이 있으면 기물을 잡으면서 해당 타일로 이동할 수 있으나 그 뒤로는 이동할 수 없음

### Knight

- 동서남북 방향으로 1칸 전진 후 해당 방향 양 옆 두 대각선 중 한 대각선으로 1칸
- 타일에 아군 기물이 있으면 해당 타일로 이동할 수 없음
- 타일에 적군 기물이 있으면 기물을 잡으면서 해당 타일로 이동할 수 있음

### Bishop

- 대각선 방향으로 ?칸
- 타일에 아군 기물이 있으면 해당 타일과 그 뒤로 이동할 수 없음
- 타일에 적군 기물이 있으면 기물을 잡으면서 해당 타일로 이동할 수 있으나 그 뒤로는 이동할 수 없음

### Pawn

- 앞으로 1칸
- 뒤로 갈 수 없음
- 최초 이동 시에는 2칸 전진 가능
- 타일에 기물이 있으면 전진할 수 없음
- 전진 방향 양 옆 대각선에 적군 기물이 있으면 기물을 잡으면서 전진할 수 있음
- 마지막 랭크에 전진하면 퀸, 룩, 비숍, 나이트 중 하나로 프로모션 해야함
- 앙파상(En Passant): 상대 폰이 최초 2칸 전진 할 경우 해당 폰을 잡을 수 있는 특수 행마법
   - 상대 폰이 최초 2칸 전진한 직후에만 앙파상 가능. 즉, 다른 수를 두게 되면 더 이상 앙파상을 할 수 없음
   - 내 폰이 상대 폰의 바로 옆에 있어야 앙파상 가능
   - 적 폰이 있는 파일에 대각선으로 전진하면서 적 폰을 잡음

## 체스 규칙

### 승리 조건

- 체크메이트: 체크 했을 때 상대가 체크에서 벗어날 방법이 없다면 승리
- 기권: 상대가 기권할 경우 승리

### 무승부 조건

- 스테일메이트: 자신의 턴에 둘 수 있는 수가 하나도 없으면 무승부
- 한 선수는 기물이 킹 밖에 없고, 다른 선수는 킹과 마이너 피스(비숍, 나이트) 중 하나만 남은 상황이라면 무승부

### 그 외

- 자신의 차례에는 반드시 어떠한 수라도 두어야 한다.
- 체크를 받았다면 반드시 체크에서 벗어나는 수를 두어야 한다. 즉, 체크에서 벗어나지 못하는 수는 둘 수 없다.
- 백이 먼저 둔다.